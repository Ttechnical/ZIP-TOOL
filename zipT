#!/bin/python
import base64
exec(base64.b64decode('aW1wb3J0IG9zCmltcG9ydCBzdWJwcm9jZXNzCmltcG9ydCB6aXBmaWxlCmltcG9ydCBweXppcHBlcgppbXBvcnQgZ2V0cGFzcwoKb3Muc3lzdGVtKCJjbGVhciIpCm9zLnN5c3RlbSgiZmlnbGV0IFpJUC1UT09MIHwgbG9sY2F0IikKCmRlZiBjcmVhdGVfemlwKCk6CiAgICBvcy5zeXN0ZW0oImNsZWFyIikKICAgIG9zLnN5c3RlbSgiZmlnbGV0IFpJUG1ha2VyIHwgbG9sY2F0IikKICAgIGZpbGVzID0gaW5wdXQoIkNob29zZSB0aGUgZmlsZXMgZm9yIFpJUDogIikuc3BsaXQoKQogICAgb3V0cHV0X3ppcCA9IGlucHV0KCJFbnRlciB0aGUgbmFtZSBmb3Igb3V0cHV0IFpJUDogIikKICAgIHdpdGggemlwZmlsZS5aaXBGaWxlKG91dHB1dF96aXAsICd3JywgemlwZmlsZS5aSVBfREVGTEFURUQpIGFzIG5ld196aXA6CiAgICAgICAgZm9yIGZpbGUgaW4gZmlsZXM6CiAgICAgICAgICAgIG5ld196aXAud3JpdGUoZmlsZSwgb3MucGF0aC5iYXNlbmFtZShmaWxlKSkKICAgIHByaW50KGYiXDAzM1s5M21aSVAgZmlsZSAne291dHB1dF96aXB9JyBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgY3JlYXRlZC5cMDMzWzBtIikKCmRlZiB6aXBfbG9ja2VyKCk6CiAgICBvcy5zeXN0ZW0oImNsZWFyIikKICAgIG9zLnN5c3RlbSgiZmlnbGV0IFpJUExvY2tlZCB8IGxvbGNhdCIpCgogICAgZGVmIHByb3RlY3RfemlwKGlucHV0X3ppcCwgb3V0cHV0X3ppcCwgcGFzc3dvcmQpOgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhpbnB1dF96aXApOgogICAgICAgICAgICBwcmludCgiXDAzM1s5MW1XYXJuaW5nOiBJbnB1dCB6aXAgZmlsZSBkb2VzIG5vdCBleGlzdC5cMDMzWzBtIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMob3V0cHV0X3ppcCk6CiAgICAgICAgICAgIHByaW50KCJcMDMzWzkxbVdhcm5pbmc6IE91dHB1dCB6aXAgZmlsZSBhbHJlYWR5IGV4aXN0cy4gUGxlYXNlIGNob29zZSBhIGRpZmZlcmVudCBuYW1lLlwwMzNbMG0iKQogICAgICAgICAgICByZXR1cm4KCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzdWJwcm9jZXNzLnJ1bihbInppcCIsICItUCIsIHBhc3N3b3JkLCBvdXRwdXRfemlwLCBpbnB1dF96aXBdLCBjaGVjaz1UcnVlKQogICAgICAgICAgICBwcmludCgiXDAzM1sxOzMybVppcCBmaWxlIHByb3RlY3RlZCBzdWNjZXNzZnVsbHk6IHt9XDAzM1swbSIuZm9ybWF0KG91dHB1dF96aXApKQogICAgICAgIGV4Y2VwdCBzdWJwcm9jZXNzLkNhbGxlZFByb2Nlc3NFcnJvcjoKICAgICAgICAgICAgcHJpbnQoIlwwMzNbOTFtRXJyb3I6IEZhaWxlZCB0byBwcm90ZWN0IHppcCBmaWxlLlwwMzNbMG0iKQoKICAgIGlucHV0X3ppcCA9IGlucHV0KCJFbnRlciB0aGUgWklQIGZpbGU6ICIpCiAgICBwYXNzd29yZCA9IGdldHBhc3MuZ2V0cGFzcyhwcm9tcHQ9IkVudGVyIHBhc3N3b3JkOiAiKQogICAgb3V0cHV0X3ppcCA9IGlucHV0KCJFbnRlciB0aGUgbmFtZSBmb3Igb3V0cHV0IFpJUDogIikKCiAgICBwcm90ZWN0X3ppcChpbnB1dF96aXAsIG91dHB1dF96aXAsIHBhc3N3b3JkKQoKZGVmIHppcF9icnV0ZSgpOgogICAgb3Muc3lzdGVtKCJjbGVhciIpCiAgICBvcy5zeXN0ZW0oImZpZ2xldCBaSVBicnV0ZSB8IGxvbGNhdCIpCiAgICB6aXBfZmlsZSA9IGlucHV0KCJFbnRlciB0aGUgWklQIGZpbGU6ICIpCiAgICBwYXNzd29yZF9maWxlX3BhdGggPSBpbnB1dCgiRW50ZXIgdGhlIHBhc3N3b3JkIGxpc3QgKHR4dCk6ICIpCgogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbihwYXNzd29yZF9maWxlX3BhdGgsICdyJykgYXMgZmlsZToKICAgICAgICAgICAgcGFzc3dvcmRfbGlzdCA9IFtsaW5lLnN0cmlwKCkgZm9yIGxpbmUgaW4gZmlsZV0KCiAgICAgICAgZm9yIHBhc3N3b3JkIGluIHBhc3N3b3JkX2xpc3Q6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdpdGggcHl6aXBwZXIuQUVTWmlwRmlsZSh6aXBfZmlsZSkgYXMgZmlsZToKICAgICAgICAgICAgICAgICAgICBmaWxlLnNldHBhc3N3b3JkKHBhc3N3b3JkLmVuY29kZSgpKQogICAgICAgICAgICAgICAgICAgIGZpbGUudGVzdHppcCgpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlwwMzNbOTNtUGFzc3dvcmQgZm91bmQsIFlvdXIgcGFzc3dvcmQgaXM6IHt9XDAzM1swbSIuZm9ybWF0KHBhc3N3b3JkKSkgICMgSGlnaGxpZ2h0ZWQgdGV4dAogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwYXNzCgogICAgICAgIHByaW50KCJcMDMzWzkzbVBhc3N3b3JkIG5vdCBmb3VuZC5cMDMzWzBtIikKCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6CiAgICAgICAgcHJpbnQoIlwwMzNbOTFtRXJyb3I6IFBhc3N3b3JkIGZpbGUgbm90IGZvdW5kLlwwMzNbMG0iKQoKZGVmIG1haW4oKToKICAgIHByaW50KCJXZWxjb21lISBQbGVhc2Ugc2VsZWN0IGFuIG9wdGlvbjoiKQogICAgcHJpbnQoIlwwMzNbOTRtMS4gWklQIE1ha2VyIikKICAgIHByaW50KCIyLiBaSVAgTG9ja2VyIikKICAgIHByaW50KCIzLiBaSVAgQnJ1dGUgRm9yY2UiKQogICAgY2hvaWNlID0gaW5wdXQoIlwwMzNbOTVtRW50ZXIgeW91ciBjaG9pY2U6IFwwMzNbMG0iKQoKICAgIGlmIGNob2ljZSA9PSAiMSI6CiAgICAgICAgY3JlYXRlX3ppcCgpCiAgICBlbGlmIGNob2ljZSA9PSAiMiI6CiAgICAgICAgemlwX2xvY2tlcigpCiAgICBlbGlmIGNob2ljZSA9PSAiMyI6CiAgICAgICAgemlwX2JydXRlKCkKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIkludmFsaWQgY2hvaWNlLiBQbGVhc2UgZW50ZXIgMSwgMiwgb3IgMy4iKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIG1haW4oKQo=').decode())
